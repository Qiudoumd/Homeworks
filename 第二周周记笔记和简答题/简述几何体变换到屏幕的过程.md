### 简述几何体变换到屏幕的过程

物体的空间变换过程为：

**局部空间→世界空间→观察空间→齐次裁剪空间→标准化设备空间**

分别对应的是：**世界矩阵变换、观察矩阵变换、透视矩阵变换、透视除法**。



### 局部空间与世界空间：

每个物体都有其自己的局部空间（局部坐标系），但是世界空间只有一个。世界变换囊括了缩放、旋转和平移变换。通过世界变换，我们可以将物体模型从自身的局部坐标系转换到世界坐标系中。这里用到的就是世界矩阵变换，**对于不同的物体，需要使用不同的世界变换矩阵；而对于同一个物体的所有顶点，都要使用一致的世界变换矩阵来变换。**



### **观察空间**：

为了获取一个2D图像，我们必须引入虚拟摄像机的概念。一个虚拟摄像机可以看作一个观察坐标系，它也是一个局部坐标系，原点为摄像机的位置，Z轴为摄像机的观察方向，Y轴为摄像机的上方向，而X轴则为摄像机的右方向。从世界空间变换到观察空间需要用到观察举证变换，**`DirectXMath`库**针对上述计算观察矩阵的处理流程提供了以下函数：

`XMMATRIX XMMatrixLookAtLH(  // 输出视图变换矩阵V`    

`FXMVECTOR EyePosition,      // 输入摄影机坐标`    

`FXMVECTOR FocusPosition,    // 输入摄影机焦点坐标`   

`FXMVECTOR UpDirection);     // 输入摄影机上朝向坐标`



### 齐次裁剪空间

齐次裁剪空间是在将物体从观察空间转换到标准化设备空间的过程中引入的一个中间空间。其主要作用是进行裁剪操作和透视投影变换。通过将观察空间中的点变换到齐次裁剪空间，可以方便地根据摄像机的视景体（一个用于定义观察区域的六面体）对物体进行裁剪，去除那些不在视景体内的部分，同时实现透视效果，使物体呈现出近大远小的视觉效果。



### 标准化设备空间：

标准化设备空间是一个三维的坐标空间，其坐标范围通常被限定在[−1,1]之间，为后续映射到屏幕空间做好准备。它是物体经过一系列变换后，在最终被映射到屏幕空间之前的一个中间表示形式。正如前面所说的，标准化设备坐标的可视取值范围为：

−1≤x≤1            −1≤y≤1               0≤z≤1                w=1

通过此提供统一的坐标标准，同时通过视口变换，可将标准化设备空间中的坐标轻松地映射到屏幕上的像素坐标